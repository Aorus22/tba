<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Turing Machine Animation</title>
    <!-- Tautan untuk React dan ReactDOM melalui CDN -->
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <!-- Tambahan untuk menggunakan hooks di React -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Styling CSS -->
    <style>
        .turing-machine {
            display: flex;
            justify-content: center;
            align-items: center;
            border: 1px solid #ccc;
            padding: 10px;
            margin-top: 20px;
        }

        .tape-cell {
            width: 30px;
            height: 30px;
            border: 1px solid #ccc;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .highlight {
            background-color: #ff0;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // Impor TuringMachine dari file TuringMachine.js
        import TuringMachine from './TuringMachine.js';

        // Konfigurasi mesin Turing dari index.js
        const addOneConfig = {
    states: ['0', '1', '2', '3', '4', '5', '6', '7', '8'],
    inputAlphabet: ['0', '1'],
    tapeAlphabet: ['0', '1', 'X', 'Y', ' '],
    transitions: {
        '{"state":"0","symbol":"1"}': { newState: '0', writeSymbol: '1', direction: 'R' },
        '{"state":"0","symbol":"0"}': { newState: '0', writeSymbol: '0', direction: 'R' },
        '{"state":"0","symbol":"X"}': { newState: '7', writeSymbol: 'X', direction: 'L' },
        '{"state":"0","symbol":" "}': { newState: '1', writeSymbol: ' ', direction: 'L' },
        
        '{"state":"1","symbol":"1"}': { newState: '2', writeSymbol: ' ', direction: 'L' },
        '{"state":"1","symbol":"0"}': { newState: '3', writeSymbol: 'X', direction: 'L' },
        
        '{"state":"2","symbol":"0"}': { newState: '2', writeSymbol: ' ', direction: 'L' },
        
        '{"state":"3","symbol":"1"}': { newState: '3', writeSymbol: '1', direction: 'L' },
        '{"state":"3","symbol":"0"}': { newState: '3', writeSymbol: '0', direction: 'L' },
        '{"state":"3","symbol":" "}': { newState: '4', writeSymbol: ' ', direction: 'R' },
        
        '{"state":"4","symbol":"0"}': { newState: '0', writeSymbol: ' ', direction: 'R' },
        '{"state":"4","symbol":"1"}': { newState: '5', writeSymbol: ' ', direction: 'R' },
        
        '{"state":"5","symbol":"Y"}': { newState: '5', writeSymbol: '0', direction: 'R' },
        '{"state":"5","symbol":"X"}': { newState: '5', writeSymbol: ' ', direction: 'R' },
        '{"state":"5","symbol":" "}': { newState: '6', writeSymbol: ' ', direction: 'R' },
        '{"state":"5","symbol":"0"}': { newState: '5', writeSymbol: ' ', direction: 'R' },
        
        '{"state":"7","symbol":"Y"}': { newState: '7', writeSymbol: 'Y', direction: 'L' },
        '{"state":"7","symbol":"1"}': { newState: '8', writeSymbol: '1', direction: 'R' },
        '{"state":"7","symbol":"0"}': { newState: '3', writeSymbol: 'X', direction: 'L' },
        
        '{"state":"8","symbol":" "}': { newState: '7', writeSymbol: 'Y', direction: 'L' },
        '{"state":"8","symbol":"Y"}': { newState: '8', writeSymbol: 'Y', direction: 'R' },
        '{"state":"8","symbol":"X"}': { newState: '8', writeSymbol: '0', direction: 'R' },
    },
    initialState: '0',
    blankSymbol: ' ',
    finalStates: ['6']
};

        // Fungsi untuk menjalankan mesin Turing dengan input tertentu
        const runTuringMachine = (input) => {
            const tm = new TuringMachine(addOneConfig);
            tm.addTape(input);

            try {
                const result = tm.run();
                return result;
            } catch (error) {
                console.error('Error:', error.message);
                return `Error: ${error.message}`;
            }
        };

        // Fungsi untuk menampilkan aplikasi React
        const App = () => {
            const [input, setInput] = React.useState('000000100');
            const [output, setOutput] = React.useState('');
            const [headPosition, setHeadPosition] = React.useState(0);

            const handleInputChange = (event) => {
                setInput(event.target.value);
            };

            const handleClick = () => {
                const result = runTuringMachine(input);
                setOutput(result);
            };

            return (
                <div className="app">
                    <h1>Turing Machine Animation</h1>
                    <input type="text" value={input} onChange={handleInputChange} />
                    <button onClick={handleClick}>Run Turing Machine</button>
                    <TuringMachineAnimation tape={output} headPosition={headPosition} />
                    <p>Output: {output}</p>
                </div>
            );
        };

        // React component untuk Turing Machine Animation
        const TuringMachineAnimation = ({ tape, headPosition }) => {
            return (
                <div className="turing-machine">
                    {tape.split('').map((symbol, index) => (
                        <div key={index} className={index === headPosition ? "tape-cell highlight" : "tape-cell"}>
                            {symbol}
                        </div>
                    ))}
                </div>
            );
        };

        // Render aplikasi React ke dalam elemen dengan id 'root'
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
